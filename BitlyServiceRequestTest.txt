@isTest
public class BitlyServiceRequestTest {
    
    
    @isTest
    static void test_shorten() {
        List<Account> lstacct = TestDataFactory.createAccounts(100);
        insert lstacct;
        List<Account> accts = [select Name, Phone, URL__c, Shortened_URL__c from Account where id IN:lstacct];
        for(Account acct: accts){
            System.assert(acct.Id!=null);
            System.assert(acct.URL__c!=null);
            
        }
        system.assert(lstacct.size()>0);
        Test.startTest();
        
        Test.setMock( HttpCalloutMock.class, new TestHttpCalloutMock() );
        
        BitlyService service = new BitlyService();
        
        String shortURL = service.shorten( URL.getSalesforceBaseUrl().toExternalForm() ) ;
        
        Test.stopTest();
        
        
        
    }
    
    
    
}